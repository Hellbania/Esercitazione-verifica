<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Albero Frattale</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h2>Albero Frattale semplice</h2>
  <canvas id="fractalCanvas" width="500" height="400"></canvas>
  <div>
    <button id="grow">Disegna albero casuale</button>
  </div>
  <script>
    function drawTree(ctx, startX, startY, len, angle, depth) {
      if (depth === 0) return;
      ctx.save();
      ctx.translate(startX, startY);
      ctx.rotate(angle);
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.lineTo(0, -len);
      ctx.stroke();
      // next branches
      var newX = 0;
      var newY = -len;
      var rand = Math.random();
      drawTree(ctx, newX, newY, len * (0.7 + rand*0.1), angle + 0.4, depth-1);
      drawTree(ctx, newX, newY, len * (0.7 + rand*0.1), angle - 0.4, depth-1);
      ctx.restore();
    }
    document.getElementById('grow').addEventListener('click', function() {
      var c = document.getElementById('fractalCanvas');
      var ctx = c.getContext('2d');
      ctx.clearRect(0,0,c.width,c.height);
      ctx.strokeStyle = '#3b2';
      ctx.lineWidth = 2;
      // randomize starting length and depth
      var depth = 8;
      drawTree(ctx, 250, 380, 80, 0, depth);
    });
  </script>
</body>
</html>
