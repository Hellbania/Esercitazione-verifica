<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Pagina effetti speciali</title>
  <style>
    body { 
      padding: 20px; 
      background-color: darkorange; 
      color: GhostWhite;
    }
    #message { margin: 10px 0; font-weight: bold; }
    #artCanvas { border: 1px solid #ccc; margin-top: 10px; background-color: white; }
    button { padding: 8px 12px; }
    a { color: GhostWhite; }
  </style>
</head>
<body>
  <h1>Pagina effetti speciali</h1>
  <button id="btn">testo a sorpresa</button>
  <div id="msg"></div>
  <canvas id="canvas" width="520" height="220"></canvas>
  <p><a href="index.html">Torna all'index</a></p>

  <script>
    const btn = document.getElementById('btn');
    const msg = document.getElementById('msg');
    const ctx = document.getElementById('canvas').getContext('2d');
    const squareSize = 18;
    let step = 0;

    const states = [
      { msg: '', btnText: 'testo a sorpresa' },
      { msg: 'PEPPEREPE', btnText: 'nuova sorpresa' },
      { msg: '', btnText: 'E ora un bel disegno', draw: true },
      { msg: '', btnText: 'Torna a capo' }
    ];

    btn.addEventListener('click', () => {
      const s = states[step];
      msg.textContent = s.msg;
      btn.textContent = s.btnText;
      
      if(step === 1) alert('TADAAAA!');
      if(s.draw) {
        ctx.clearRect(0, 0, 520, 220);
        drawTriangle(10, 10);
        drawRhombo(260, 20);
      }
      if(step === 2) ctx.clearRect(0, 0, 520, 220);
      
      step = (step + 1) % 4;
    });

    function drawTriangle(x, y) {
      ctx.fillStyle = '#2b6cb0';
      // Triangolo che punta verso l'alto
      for(let r = 0; r < 8; r++)
        for(let c = 0; c <= r; c++)
          ctx.fillRect(x + c * squareSize, y + r * squareSize, squareSize - 1, squareSize - 1);
    }

    function drawRhombo(x, y) {
      ctx.fillStyle = '#d53f8c';
      // Parte superiore del rombo (punta su)
      for(let r = 0; r < 6; r++) {
        const count = r * 2 + 1;
        const sx = x + (5 - r) * squareSize;
        for(let c = 0; c < count; c++)
          ctx.fillRect(sx + c * squareSize, y + r * squareSize, squareSize - 1, squareSize - 1);
      }
      // Parte inferiore del rombo (punta giÃ¹)
      for(let r = 4; r >= 0; r--) {
        const count = r * 2 + 1;
        const sx = x + (5 - r) * squareSize;
        for(let c = 0; c < count; c++)
          ctx.fillRect(sx + c * squareSize, y + (10 - r) * squareSize, squareSize - 1, squareSize - 1);
      }
    }
  </script>
</body>
</html>
